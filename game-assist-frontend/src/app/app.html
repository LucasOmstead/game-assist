<div class="chatbot-container">
  <div class="header">
    <h1>Fandom Assistant</h1>
    <p *ngIf="!selectedFandom">Enter a fandom name to get started</p>
    <p *ngIf="selectedFandom && isLoading">Loading {{ selectedFandom }} wiki...</p>
    <p *ngIf="selectedFandom && !isLoading">Ask me anything about {{ selectedFandom }}!</p>
  </div>

  <div class="chat-interface">
    <div class="chat-messages">
      <div 
        *ngFor="let message of messages" 
        class="message"
        [ngClass]="message.isUser ? 'user-message' : 'bot-message'"
      >
        <div class="message-content">
          <div class="message-text">{{ message.text }}</div>
          <div class="message-time">{{ formatTime(message.timestamp) }}</div>
        </div>
      </div>

      <div *ngIf="isTyping" class="message bot-message">
        <div class="message-content">
          <div class="typing-indicator">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>

    <div class="chat-input-container">
      <div class="input-wrapper">
        <input 
          type="text" 
          [(ngModel)]="currentMessage"
          (keypress)="onKeyPress($event)"
          placeholder="{{ getPlaceholderText() }}"
          class="message-input"
          [disabled]="isTyping || isLoading"
        >
        <button 
          (click)="sendMessage()" 
          class="send-button"
          [disabled]="!currentMessage.trim() || isTyping || isLoading"
        >
          â†’
        </button>
      </div>
      
      <div class="fandom-info" *ngIf="selectedFandom">
        <span>{{ selectedFandom }} Wiki</span>
        <button (click)="resetChat()" class="change-fandom-btn">New Fandom</button>
      </div>
    </div>
  </div>
</div>
